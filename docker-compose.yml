version: '3.8'

services:
  homepage:
    build: .
    container_name: mikey-homepage
    restart: unless-stopped
    ports:
      - "4321:4321"
    volumes:
      # Mount data directory for easy config updates
      # Edit these JSON files and restart the container to update content
      - ./data:/app/data:ro
    environment:
      - NODE_ENV=production
      - HOST=0.0.0.0
      - PORT=4321

      # Authentication (change this!)
      - AUTH_USERNAME=admin
      - AUTH_PASSWORD=changeme

      # Bookmark URLs (used in data/bookmarks.json)
      - BOOKMARK_JELLYFIN_URL=http://jellyfin.local:8096
      - BOOKMARK_JELLYSEERR_URL=http://jellyseerr.local:5055
      - BOOKMARK_IMMICH_URL=http://immich.local:2283
      - BOOKMARK_ADGUARD_URL=http://adguard.local:3000
      - BOOKMARK_HOMEASSISTANT_URL=http://homeassistant.local:8123

      # Service API credentials
      - ADGUARD_URL=http://adguard.local:3000
      - ADGUARD_USERNAME=admin
      - ADGUARD_PASSWORD=

      - HOMEASSISTANT_URL=http://homeassistant.local:8123
      - HOMEASSISTANT_TOKEN=

      - TRUENAS_URL=http://truenas.local
      - TRUENAS_API_KEY=

      - PORTAINER_URL=http://portainer.local:9000
      - PORTAINER_API_KEY=

      - PROXMOX_URL=https://proxmox.local:8006
      - PROXMOX_TOKEN_ID=
      - PROXMOX_TOKEN_SECRET=

      - JELLYFIN_URL=http://jellyfin.local:8096
      - JELLYFIN_API_KEY=

      - QBITTORRENT_URL=http://qbittorrent.local:8080
      - QBITTORRENT_USERNAME=admin
      - QBITTORRENT_PASSWORD=

      - IMMICH_URL=http://immich.local:2283
      - IMMICH_API_KEY=

      - SONARR_URL=http://sonarr.local:8989
      - SONARR_API_KEY=

      - RADARR_URL=http://radarr.local:7878
      - RADARR_API_KEY=

      - JELLYSEERR_URL=http://jellyseerr.local:5055
      - JELLYSEERR_API_KEY=

      # RSS Feeds
      - RSS_FEED_URL=
      - REDDIT_FEED_URL=
      - YOUTUBE_FEED_URL=
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:4321/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
